<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <meta http-equiv="x-ua-compatible" content="ie=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <title>Part 4: Styling</title>
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.0/jquery.min.js"></script>
    </head>
    <body>
        <h1>Welcome To My Video Player</h1>
        <div id="video_container">
            <video id="my_player">
                <source src="http://clips.vorwaerts-gmbh.de/big_buck_bunny.mp4" type="video/mp4" />
                <source src="http://clips.vorwaerts-gmbh.de/big_buck_bunny.ogv" type="video/ogg" />
                Your web browser does not support video. Please upgrade it to view this video.
            </video>
        </div>
        <div id="video_controls">
            <button id="play">Play</button>
            <p>Seek: </p>
            <progress id='progress_bar' min='0' max='100' value='0'></progress><span id="time">0:00</span>/<span id="duration">0:00</span>
            <button id="seek_beginning">Restart</button>
            <button id="seek_forward">+10</button>
            <button id="seek_backwards">-10</button>
            
            <p>Volume: <span id="volume"></span></p>
            <button id="volume_up">+</button>
            <button id="volume_down">-</button>
            <button id="volume_mute">Mute</button>
        </div>
        <script type="text/javascript">
            var formatTime = function(time) {
                var minutes = Math.floor(time / 60);
                var seconds =  Math.floor(time - minutes * 60);
                return  str_pad_left(minutes, '0', 2) + ':' + str_pad_left(seconds, '0', 2); 
            };
            var str_pad_left = function(string, pad, length) {
                return (new Array(length + 1).join(pad) + string).slice(-length);
            }
            //var player = $('#my_player').get(0)
            var player = document.getElementById('my_player');
            var muted = false;
            $('#play').click(function(e){
                e.preventDefault();
                if (player.paused) {
                    player.play();
                } else {
                    player.pause();
                }
            });
            player.onplay = function() {
                $('#play').html('Pause');
            }
            player.onpause = function() {
                $('#play').html('Play');
            }
            player.ontimeupdate = function() {
                var percentage = Math.floor((player.currentTime / player.duration) * 100);
                document.getElementById('progress_bar').value = percentage;
                $('#time').html(formatTime(player.currentTime));
            }
            player.onloadedmetadata = function() {
                $('#duration').html(formatTime(player.duration));
                $('#volume').html(player.volume);
            }
            player.onvolumechange = function() {
                if (player.muted) {
                    $('#volume').html(0);
                } else {
                    $('#volume').html(player.volume);
                }
            }
            $('#seek_beginning').click(function(e){
                e.preventDefault();
                player.currentTime = 0;
            });
            $('#seek_forward').click(function(e){
                e.preventDefault();
                player.currentTime = player.currentTime + 10;
            });
            $('#seek_backwards').click(function(e){
                e.preventDefault();
                player.currentTime = player.currentTime - 10;
            });
            $('#volume_up').click(function(e){
                e.preventDefault();
                player.muted = false;
                muted = false;
                $('#volume_mute').html('Mute');
                var newVolume = player.volume + 0.1;
                if (newVolume > 1) {
                    newVolume = 1;
                }
                player.volume = newVolume;
            });
            $('#volume_down').click(function(e){
                e.preventDefault();
                var newVolume = player.volume - 0.1;
                if (newVolume < 0) {
                    newVolume = 0;
                }
                player.volume = newVolume;
            });
            $('#volume_mute').click(function(e){
                e.preventDefault();
                muted = !muted;
                player.muted = muted;
                if (muted == false) {
                    $(this).html('Mute');
                } else {
                    $(this).html('Unmute');
                }
            });
        </script>
    </body>
</html>